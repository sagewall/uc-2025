<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Trail Notes</title>

    <!-- Load Calcite -->
    <script
      type="module"
      src="https://js.arcgis.com/calcite-components/3.2.1/calcite.esm.js"
    ></script>

    <!-- Load the ArcGIS Maps SDK for JavaScript core API -->
    <link
      rel="stylesheet"
      type="text/css"
      href="https://js.arcgis.com/4.33/esri/themes/light/main.css"
    />
    <script src="https://js.arcgis.com/4.33/"></script>

    <!-- Load map components -->
    <script
      type="module"
      src="https://js.arcgis.com/4.33/map-components/"
    ></script>

    <!-- CSS Styles -->
    <style>
      arcgis-feature-table {
        height: 33vh;
      }
    </style>
  </head>
  <body>
    <calcite-shell>
      <arcgis-map item-id="ff54cef4e4334ce6bf6283054f1798e3">
        <arcgis-zoom position="top-left"></arcgis-zoom>
        <arcgis-layer-list
          position="bottom-left"
          show-collapse-button
          show-heading
        ></arcgis-layer-list>
      </arcgis-map>
      <arcgis-feature-table
        reference-element="arcgis-map"
        slot="footer"
      ></arcgis-feature-table>
      <calcite-shell-panel resizable slot="panel-end">
        <calcite-panel>
          <arcgis-editor
            position="top-right"
            reference-element="arcgis-map"
          ></arcgis-editor>
        </calcite-panel>
      </calcite-shell-panel>
    </calcite-shell>

    <script type="module">
      // Get a reference to the arcgis-map component
      const viewElement = document.querySelector("arcgis-map");

      // Wait for the view to be ready before accessing the map
      await viewElement.viewOnReady();

      // Access the map's layers to find the Trails feature layer
      const trailsFeatureLayer = viewElement.view.map.layers.find(
        (layer) => layer.title === "Trails"
      );

      // Set  the layer on the Feature Table component
      const featureTable = document.querySelector("arcgis-feature-table");
      featureTable.layer = trailsFeatureLayer;
    </script>
  </body>
</html>
